#!/usr/bin/env bash
#
# pomo ‚Äî Pomodoro & general Timewarrior wrapper
#
# Usage:
#   pomo work         # start a 25 min work session (auto‚Äênotify at 25m)
#   pomo break        # start a 5 min break      (auto‚Äênotify at 5m)
#   pomo stop         # stop whatever‚Äôs running
#   pomo tag NAME...  # start tracking NAME (e.g. pomo tag run)
#   pomo status       # show today‚Äôs summary

TIMEW="timew"
NOTIFY="notify-send"

case "$1" in
  work)
    $TIMEW start pomodoro work
    $NOTIFY "Pomodoro ‚ñ∂ Work started" "25 min timer begun"
    ( sleep 1500 && $NOTIFY "‚è∞ Work interval ended. Please switch to break." ) &
    ;;

  break)
    $TIMEW start pomodoro break
    $NOTIFY "Pomodoro üõé Break started" "5 min timer begun"
    ( sleep 300 && $NOTIFY "‚è∞ Break ended. Back to work!" ) &
    ;;

  stop)
    $TIMEW stop
    $NOTIFY "‚èπ Timer stopped" "Session ended"
    ;;

  tag)
    shift
    if [ $# -eq 0 ]; then
      echo "Usage: pomo tag <activity-name>"
      exit 1
    fi
    $TIMEW start "$@"
    $NOTIFY "‚ñ∂ Tracking: $*" "Started"
    ;;

  status)
    # show a brief summary of today
    $TIMEW summary :day
    ;;

  *)
    cat <<EOF
Usage: pomo {work|break|stop|tag|status}

  work         Start a 25 min work session (notify at 25 min; you still need to 'pomo stop')
  break        Start a 5 min break        (notify at 5 min; then 'pomo stop')
  stop         Stop current session
  tag NAME‚Ä¶    Start tracking arbitrary activity e.g. 'pomo tag run'
  status       Show today's Timewarrior summary
EOF
    ;;
esac

